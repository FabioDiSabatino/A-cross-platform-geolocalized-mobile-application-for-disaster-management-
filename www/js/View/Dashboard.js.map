{"version":3,"file":"Dashboard.js","sourceRoot":"","sources":["../../../scripts/View/Dashboard.ts"],"names":[],"mappings":"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","sourcesContent":["var sortLatestNews = (dati) => {\r\n    var arr = dati.official;\r\n    arr.sort((a, b) => {\r\n        return parseFloat(b.times) - parseFloat(a.times);\r\n    });\r\n    return arr;\r\n\r\n};\r\n\r\nvar news = {\r\n    official: [\r\n\r\n        {\r\n            title: \"Disaster balance\",\r\n            content: \"the local police confirmed: over 348 people are homeless, balance probably we'll grow in the next hours\",\r\n            position: { zero: { lat: 42.368, lng: 13.369 }, cell: { cell_number_lat: 4, cell_number_lng: 4 } },\r\n            times: \"21.30\",\r\n            date: \" 15/02\",\r\n            distanza: 40,\r\n        },\r\n        {\r\n            title: \"Road interrupt\",\r\n            content: \"Over 100 users has signaled that the this road is not accessible by car\",\r\n            position: { zero: { lat: 42.368, lng: 13.357 }, cell: { cell_number_lat: 4, cell_number_lng: 4 } },\r\n            times: \"11.20\",\r\n            date: \" 15/02\",\r\n            distanza: 10,\r\n        },\r\n        {\r\n            title: \"Food and water\",\r\n            content: \"civil protection have set up camp for the supply of food, water and the first assistance\",\r\n            position: { zero: { lat: 42.368, lng: 13.329 }, cell: { cell_number_lat: 4, cell_number_lng: 4 } },\r\n            times: \"17.20\",\r\n            date: \" 15/02\",\r\n            distanza: 21\r\n        }\r\n    ]\r\n};\r\n\r\n\r\nnamespace View {\r\n    \"use strict\";\r\n    export class Dashboard implements IPage {\r\n        private compiledFoiTemplate: HandlebarsTemplateDelegate;\r\n        public constructor() {\r\n            let templateGetter = new XMLHttpRequest();\r\n            templateGetter.open(\"GET\", \"templates/foi-home.tmpl\", false);\r\n            templateGetter.send();\r\n            this.compiledFoiTemplate = Handlebars.compile(templateGetter.responseText);\r\n        }\r\n        public initialize() {\r\n            $(document).on(\"pagecontainerchange\", (event: JQueryEventObject, pages: any) => {\r\n                if (pages.toPage.children().prop(\"id\") !== \"dashboard\") {\r\n                    return;\r\n                }\r\n                document.getElementById(\"comestai-button\").addEventListener(main.UXEvent, () => {\r\n                    let howAreYouView = main.PageHandlers.existsHandler(\"howareyou\") ?\r\n                        main.PageHandlers.getHandler(\"howareyou\") :\r\n                        main.PageHandlers.addHandler(\"howareyou\", new View.HowAreYou());\r\n                    main.navigateTo(\"howareyou.html\", howAreYouView);\r\n                });\r\n                document.getElementById(\"poi\").addEventListener(main.UXEvent, () => {\r\n                    let poiView = main.PageHandlers.existsHandler(\"poi\") ?\r\n                        main.PageHandlers.getHandler(\"poi\") :\r\n                        main.PageHandlers.addHandler(\"poi\", new View.Poi());\r\n                    main.navigateTo(\"poi.html\", poiView);\r\n                });\r\n                document.getElementById(\"segnala-button\").addEventListener(main.UXEvent, () => {\r\n                    let signalView = main.PageHandlers.existsHandler(\"signal\") ?\r\n                        main.PageHandlers.getHandler(\"signal\") :\r\n                        main.PageHandlers.addHandler(\"signal\", new View.Signal());\r\n                    main.navigateTo(\"signal.html\", signalView);\r\n                });\r\n                document.getElementById(\"foi\").addEventListener(main.UXEvent, () => {\r\n                    let foiView = main.PageHandlers.existsHandler(\"foi\") ?\r\n                        main.PageHandlers.getHandler(\"foi\") :\r\n                        main.PageHandlers.addHandler(\"foi\", new View.Foi());\r\n                    main.navigateTo(\"foi.html\", foiView);\r\n                });\r\n                document.getElementById(\"map-widget\").addEventListener(main.UXEvent, () => {\r\n                    let mapView = main.PageHandlers.existsHandler(\"map\") ?\r\n                        main.PageHandlers.getHandler(\"map\") :\r\n                        main.PageHandlers.addHandler(\"map\", new View.MapPage());\r\n                    main.navigateTo(\"map.html\", mapView);\r\n                });\r\n                if (typeof main.FoiList !== \"undefined\" && main.FoiList.IsComplete) {\r\n                    this.updateFoiBanner();\r\n                }\r\n                // ===== temp solution!!!!!!! =====\r\n                sortLatestNews(news);\r\n                $(\".title-news\").text(news.official[0].title);\r\n                $(\".content-news\").text(news.official[0].content);\r\n                // ================================\r\n            });\r\n        }\r\n\r\n        public updateFoiBanner() {\r\n            document.getElementById(\"foi-most-serious\").innerHTML = this.compiledFoiTemplate(main.FoiList.mostSerious());\r\n        }\r\n    }\r\n}"]}