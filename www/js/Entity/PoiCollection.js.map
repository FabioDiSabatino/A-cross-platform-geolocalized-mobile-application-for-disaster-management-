{"version":3,"file":"PoiCollection.js","sourceRoot":"","sources":["../../../scripts/Entity/PoiCollection.ts"],"names":[],"mappings":";;;;;AAAC,IAAK,UAIL;AAJA,WAAK,UAAU;IACZ,2DAAY,CAAA;IACZ,iDAAO,CAAA;IACP,+CAAM,CAAA;AACV,CAAC,EAJK,UAAU,KAAV,UAAU,QAIf;AACD,IAAU,MAAM,CAmDf;AAnDD,WAAU,MAAM,EAAC,CAAC;IACd,YAAY,CAAC;IACb;QAAmC,iCAAU;QAA7C;YAAmC,8BAAU;YACjC,mBAAc,GAAe,IAAI,CAAC;QA+C9C,CAAC;QA9CG,sBAAW,yCAAc;iBAAzB;gBACI,MAAM,CAAC,IAAI,CAAC,cAAc,CAAC;YAC/B,CAAC;;;WAAA;QAKM,0CAAkB,GAAzB;YACI,IAAI,CAAC,cAAc,GAAG,UAAU,CAAC,YAAY,CAAC;YAC9C,IAAI,CAAC,IAAI,CAAC,UAAC,CAAM,EAAE,CAAM;gBACrB,MAAM,CAAC,CAAC,CAAC,YAAY,GAAG,CAAC,CAAC,YAAY,CAAC;YAC3C,CAAC,CAAC,CAAC;QACP,CAAC;;QAIM,qCAAa,GAApB;YACI,IAAI,CAAC,cAAc,GAAG,UAAU,CAAC,OAAO,CAAC;YACzC,IAAI,CAAC,IAAI,CAAC,UAAC,CAAM,EAAE,CAAM;gBACrB,MAAM,CAAC,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,QAAQ,CAAC;YACnC,CAAC,CAAC,CAAC;QACP,CAAC;;QAKM,0CAAkB,GAAzB;YACI,IAAI,CAAC,cAAc,GAAG,UAAU,CAAC,MAAM,CAAC;YACxC,IAAI,CAAC,IAAI,CAAC,UAAC,CAAM,EAAE,CAAM;gBACrB,MAAM,CAAC,CAAC,CAAC,YAAY,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;YAC/D,CAAC,CAAC,CAAC;QACP,CAAC;;QAMa,uBAAS,GAAvB,UAAwB,OAAmB;YACvC,IAAI,OAAO,GAAG,IAAI,aAAa,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;YAChD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,CAAC;gBACtC,OAAO,CAAC,IAAI,CAAC,IAAI,UAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,SAAS,EACrE,OAAO,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,EACtE,OAAO,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,IAAI,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,CAAC;YAC5D,CAAC;YACD,MAAM,CAAC,OAAO,CAAC;QACnB,CAAC;QACL,oBAAC;IAAD,CAAC,AAhDD,CAAmC,KAAK,GAgDvC;IAhDY,oBAAa,gBAgDzB,CAAA;AACL,CAAC,EAnDS,MAAM,KAAN,MAAM,QAmDf","sourcesContent":["ï»¿enum poiSorting {\r\n    reportNumber,\r\n    nearest,\r\n    latest\r\n}\r\nnamespace Entity {\r\n    \"use strict\";\r\n    export class PoiCollection extends Array<Poi> {\r\n        private currentSorting: poiSorting = null;\r\n        public get CurrentSorting(): poiSorting {\r\n            return this.currentSorting;\r\n        }\r\n\r\n        /**\r\n         * Sorts POI by number of reports\r\n         */\r\n        public sortByReportNumber() {\r\n            this.currentSorting = poiSorting.reportNumber;\r\n            this.sort((a: Poi, b: Poi) => {\r\n                return b.ReportNumber - a.ReportNumber;\r\n            });\r\n        };\r\n        /**\r\n         * Riordino dei POI in base alla distanza\r\n         */\r\n        public sortByNearest() {\r\n            this.currentSorting = poiSorting.nearest;\r\n            this.sort((a: Poi, b: Poi) => {\r\n                return a.Distance - b.Distance;\r\n            });\r\n        };\r\n\r\n        /**\r\n         * Riordino dei POI sulla base dell'ultimo update.\r\n         */\r\n        public sortByLatestUpdate() {\r\n            this.currentSorting = poiSorting.latest;\r\n            this.sort((a: Poi, b: Poi) => {\r\n                return a.LatestUpdate.getTime() - b.LatestUpdate.getTime();\r\n            });\r\n        };\r\n\r\n        /**\r\n         * Crea una collezione di POI a partire dal JSON ricevuto dal server\r\n         * @param poiJSON JSON ricevuto dal server\r\n         */\r\n        public static parseJSON(poiJSON: Array<any>): PoiCollection {\r\n            var returns = new PoiCollection(poiJSON.length);\r\n            for (let i = 0; i < poiJSON.length; ++i) {\r\n                returns.push(new Poi(poiJSON[i].id, poiJSON[i].name, poiJSON[i].emergency,\r\n                    poiJSON[i].latestUpdate, poiJSON[i].distance, poiJSON[i].position.zero,\r\n                    poiJSON[i].position.cell, poiJSON[i].reportNumber));\r\n            }\r\n            return returns;\r\n        }\r\n    }\r\n}"]}